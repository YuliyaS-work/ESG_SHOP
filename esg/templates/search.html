{% extends 'basic.html' %}
{% load static %}

{% block title %}–ü–æ–∏—Å–∫{% endblock %}
{% block styles %}
<!--    <link rel="stylesheet" href="{% static 'css/sidebar.css' %}">-->
    <link rel="stylesheet" href="{% static 'css/catalog.css' %}">
    <link rel="stylesheet" href="{% static 'css/pagination.css' %}">
    <link rel="stylesheet" href="{% static 'css/search.css' %}">
{% endblock %}
{% block content %}
<main class="main-content">

     <!--  ===–∫–Ω–æ–ø–∫–∞ –ö–∞—Ç–∞–ª–æ–≥===-->
  <a href="{% url 'catalog' %}" class="catalog-btn">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤–µ—Å—å –∫–∞—Ç–∞–ª–æ–≥</a>

 <!-- === –í–µ—Ä—Ö–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ —Ä–∞–∑–¥–µ–ª–æ–≤ === -->
  <div class="catalog-top-buttons">
    {% for rubric in rubrics %}
      <a href="{% url 'subrubrics' rubric.name_translit %}" class="catalog-btn">
        {% if rubric.rubric_name == "–≠–ª–µ–∫—Ç—Ä–∏–∫–∞" %}
          <i class="fas fa-bolt"></i>
        {% elif rubric.rubric_name == "–°–∞–Ω—Ç–µ—Ö–Ω–∏–∫–∞" %}
          <i class="fas fa-faucet"></i>
        {% elif rubric.rubric_name == "–ì–∞–∑–∏—Ñ–∏–∫–∞—Ü–∏—è" %}
          <i class="fas fa-fire"></i>
        {% else %}
          <i class="fas fa-folder"></i>
        {% endif %}
        <span>{{ rubric.rubric_name }}</span>
      </a>
    {% endfor %}
  </div>


<!--<h2>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ –∑–∞–ø—Ä–æ—Å—É</h2>-->
<!--<ul>-->
<!--  {% for item in results %}-->
<!--<li><a href="{% url 'product' item.rubric_name_translit item.subrubric_title_translit item.product_title_translit %}">{{ item.title }}</a><br>{{ item.description }}<br></li>-->
<!--  {% empty %}-->
<!--    <li>–í–≤–µ–¥–∏—Ç–µ –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å</li>-->
<!--  {% endfor %}-->
<!--</ul>-->

  <section class="search-results">
    <h2>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ –∑–∞–ø—Ä–æ—Å—É</h2>

    {% if results %}
<!--      <ul class="results-list">-->
<!--        {% for item in results %}-->
<!--          <li class="result-item">-->
<!--            <a href="{% url 'product' item.rubric_name_translit item.subrubric_title_translit item.product_title_translit %}" class="result-link">-->
<!--              {{ item.title }}-->
<!--            </a>-->
<!--            <p class="result-desc">{{ item.description }}</p>-->
<!--          </li>-->
<!--        {% endfor %}-->
<!--      </ul>-->
     <div class="products-grid">
        {% for product in results %}
          <div class="product-card-catalog">
            {% if product.photo %}
              <img src="{{ product.photo.url }}" alt="{{ product.title }}">
            {% else %}
              <img src="{% static 'image/default-product.png' %}" alt="–ù–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è">
            {% endif %}

            <!-- –ü—Ä–æ–≤–µ—Ä—è–µ–º translit-–ø–æ–ª—è –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º —Å—Å—ã–ª–∫–∏ -->
            {% if product.rubric_name_translit and product.subrubric_title_translit and product.product_title_translit %}
              <a href="{% url 'product' product.rubric_name_translit product.subrubric_title_translit product.product_title_translit %}" class="result-link">
                {{ product.title }}
              </a>
            {% else %}
              <span class="result-link">{{ product.title }}</span>
            {% endif %}

            <p class="product-desc">{{ product.description|truncatewords:15 }}</p>
            <p class="price">{{ product.price }} BYN</p>
            <button type="button"
                    class="basket"
                    data-title="{{ product.title }}"
                    data-price="{{ product.price|floatformat:2 }}">
              –ö—É–ø–∏—Ç—å
            </button>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <p class="no-results">–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ üòï –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å</p>
    {% endif %}
  </section>
</main>
{% endblock %}